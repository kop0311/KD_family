exports.id=400,exports.ids=[400],exports.modules={4270:(a,b,c)=>{"use strict";c.d(b,{q:()=>T,M:()=>S});var d=c(88198),e=c(61792),f=c(23599),g=c(11208),h=c(10444),i=c(67353);let j=(0,d.zD)("users/fetchUsers",async(a,{rejectWithValue:b})=>{try{return(await i.Eo.getUsers(a)).data}catch(a){return b(a.response?.data?.message||"Failed to fetch users")}}),k=(0,d.zD)("users/fetchUser",async(a,{rejectWithValue:b})=>{try{return(await i.Eo.getUser(a)).data}catch(a){return b(a.response?.data?.message||"Failed to fetch user")}}),l=(0,d.zD)("users/updateUser",async({id:a,updates:b},{rejectWithValue:c})=>{try{return(await i.Eo.updateUser(a,b)).data}catch(a){return c(a.response?.data?.message||"Failed to update user")}}),m=(0,d.Z0)({name:"user",initialState:{users:[],currentUser:null,isLoading:!1,error:null},reducers:{setCurrentUser:(a,b)=>{a.currentUser=b.payload},clearError:a=>{a.error=null}},extraReducers:a=>{a.addCase(j.pending,a=>{a.isLoading=!0,a.error=null}).addCase(j.fulfilled,(a,b)=>{a.isLoading=!1,a.users=b.payload}).addCase(j.rejected,(a,b)=>{a.isLoading=!1,a.error=b.payload}).addCase(k.fulfilled,(a,b)=>{a.currentUser=b.payload}).addCase(k.rejected,(a,b)=>{a.error=b.payload}).addCase(l.fulfilled,(a,b)=>{let c=a.users.findIndex(a=>a.id===b.payload.id);-1!==c&&(a.users[c]=b.payload),a.currentUser?.id===b.payload.id&&(a.currentUser=b.payload)}).addCase(l.rejected,(a,b)=>{a.error=b.payload})}}),{setCurrentUser:n,clearError:o}=m.actions,p=m.reducer,q=(0,d.zD)("tasks/fetchTasks",async(a,{rejectWithValue:b})=>{try{return(await i.ov.getTasks(a)).data}catch(a){return b(a.response?.data?.message||"Failed to fetch tasks")}}),r=(0,d.zD)("tasks/createTask",async(a,{rejectWithValue:b})=>{try{return(await i.ov.createTask(a)).data}catch(a){return b(a.response?.data?.message||"Failed to create task")}}),s=(0,d.zD)("tasks/updateTask",async({id:a,updates:b},{rejectWithValue:c})=>{try{return(await i.ov.updateTask(a,b)).data}catch(a){return c(a.response?.data?.message||"Failed to update task")}}),t=(0,d.zD)("tasks/deleteTask",async(a,{rejectWithValue:b})=>{try{return await i.ov.deleteTask(a),a}catch(a){return b(a.response?.data?.message||"Failed to delete task")}}),u=(0,d.Z0)({name:"tasks",initialState:{tasks:[],currentTask:null,isLoading:!1,error:null,filters:{}},reducers:{setCurrentTask:(a,b)=>{a.currentTask=b.payload},setFilters:(a,b)=>{a.filters=b.payload},clearError:a=>{a.error=null}},extraReducers:a=>{a.addCase(q.pending,a=>{a.isLoading=!0,a.error=null}).addCase(q.fulfilled,(a,b)=>{a.isLoading=!1,a.tasks=b.payload}).addCase(q.rejected,(a,b)=>{a.isLoading=!1,a.error=b.payload}).addCase(r.fulfilled,(a,b)=>{a.tasks.push(b.payload)}).addCase(r.rejected,(a,b)=>{a.error=b.payload}).addCase(s.fulfilled,(a,b)=>{let c=a.tasks.findIndex(a=>a.id===b.payload.id);-1!==c&&(a.tasks[c]=b.payload),a.currentTask?.id===b.payload.id&&(a.currentTask=b.payload)}).addCase(s.rejected,(a,b)=>{a.error=b.payload}).addCase(t.fulfilled,(a,b)=>{a.tasks=a.tasks.filter(a=>a.id!==b.payload),a.currentTask?.id===b.payload&&(a.currentTask=null)}).addCase(t.rejected,(a,b)=>{a.error=b.payload})}}),{setCurrentTask:v,setFilters:w,clearError:x}=u.actions,y=u.reducer,z=(0,d.zD)("points/fetchUserPoints",async(a,{rejectWithValue:b})=>{try{return(await i.Ig.getPoints(a)).data}catch(a){return b(a.response?.data?.message||"Failed to fetch points")}}),A=(0,d.zD)("points/fetchPointsHistory",async(a,{rejectWithValue:b})=>{try{return(await i.Ig.getPointsHistory(a)).data}catch(a){return b(a.response?.data?.message||"Failed to fetch points history")}}),B=(0,d.zD)("points/fetchLeaderboard",async(a,{rejectWithValue:b})=>{try{return(await i.Ig.getLeaderboard(a)).data}catch(a){return b(a.response?.data?.message||"Failed to fetch leaderboard")}}),C=(0,d.zD)("points/awardPoints",async(a,{rejectWithValue:b})=>{try{return(await i.Ig.awardPoints(a)).data}catch(a){return b(a.response?.data?.message||"Failed to award points")}}),D=(0,d.Z0)({name:"points",initialState:{userPoints:0,pointsHistory:[],leaderboard:[],isLoading:!1,error:null},reducers:{clearError:a=>{a.error=null},addPointsRecord:(a,b)=>{a.pointsHistory.unshift(b.payload),a.userPoints+=b.payload.points}},extraReducers:a=>{a.addCase(z.pending,a=>{a.isLoading=!0,a.error=null}).addCase(z.fulfilled,(a,b)=>{a.isLoading=!1,a.userPoints=b.payload.totalPoints||0}).addCase(z.rejected,(a,b)=>{a.isLoading=!1,a.error=b.payload}).addCase(A.fulfilled,(a,b)=>{a.pointsHistory=b.payload}).addCase(A.rejected,(a,b)=>{a.error=b.payload}).addCase(B.fulfilled,(a,b)=>{a.leaderboard=b.payload}).addCase(B.rejected,(a,b)=>{a.error=b.payload}).addCase(C.fulfilled,(a,b)=>{a.pointsHistory.unshift(b.payload),a.userPoints+=b.payload.points}).addCase(C.rejected,(a,b)=>{a.error=b.payload})}}),{clearError:E,addPointsRecord:F}=D.actions,G=D.reducer,H=(0,d.zD)("notifications/fetchNotifications",async(a,{rejectWithValue:b})=>{try{return(await i.i9.getNotifications(a)).data}catch(a){return b(a.response?.data?.message||"Failed to fetch notifications")}}),I=(0,d.zD)("notifications/markAsRead",async(a,{rejectWithValue:b})=>{try{return await i.i9.markAsRead(a),a}catch(a){return b(a.response?.data?.message||"Failed to mark as read")}}),J=(0,d.zD)("notifications/markAllAsRead",async(a,{rejectWithValue:b})=>{try{return await i.i9.markAllAsRead(a),a}catch(a){return b(a.response?.data?.message||"Failed to mark all as read")}}),K=(0,d.zD)("notifications/deleteNotification",async(a,{rejectWithValue:b})=>{try{return await i.i9.deleteNotification(a),a}catch(a){return b(a.response?.data?.message||"Failed to delete notification")}}),L=(0,d.Z0)({name:"notifications",initialState:{notifications:[],unreadCount:0,isLoading:!1,error:null},reducers:{addNotification:(a,b)=>{a.notifications.unshift(b.payload),b.payload.isRead||(a.unreadCount+=1)},clearError:a=>{a.error=null}},extraReducers:a=>{a.addCase(H.pending,a=>{a.isLoading=!0,a.error=null}).addCase(H.fulfilled,(a,b)=>{a.isLoading=!1,a.notifications=b.payload,a.unreadCount=b.payload.filter(a=>!a.isRead).length}).addCase(H.rejected,(a,b)=>{a.isLoading=!1,a.error=b.payload}).addCase(I.fulfilled,(a,b)=>{let c=a.notifications.find(a=>a.id===b.payload);c&&!c.isRead&&(c.isRead=!0,a.unreadCount-=1)}).addCase(I.rejected,(a,b)=>{a.error=b.payload}).addCase(J.fulfilled,a=>{a.notifications.forEach(a=>{a.isRead=!0}),a.unreadCount=0}).addCase(J.rejected,(a,b)=>{a.error=b.payload}).addCase(K.fulfilled,(a,b)=>{let c=a.notifications.findIndex(a=>a.id===b.payload);-1!==c&&(a.notifications[c].isRead||(a.unreadCount-=1),a.notifications.splice(c,1))}).addCase(K.rejected,(a,b)=>{a.error=b.payload})}}),{addNotification:M,clearError:N}=L.actions,O=L.reducer,P={key:"root",storage:f.A,whitelist:["auth","user"]},Q=(0,g.HY)({auth:h.Ay,user:p,task:y,points:G,notification:O}),R=(0,e.rL)(P,Q),S=(0,d.U1)({reducer:R,middleware:a=>a({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),T=(0,e.GM)(S)},7956:(a,b,c)=>{"use strict";c.d(b,{h:()=>i,p:()=>g});var d=c(60687),e=c(43210);let f=(0,e.createContext)(void 0);function g({children:a}){let[b,c]=(0,e.useState)([]),g=(0,e.useCallback)(a=>{let b=Math.random().toString(36).substr(2,9),d={...a,id:b};c(a=>[...a,d]),setTimeout(()=>{i(b)},a.duration||5e3)},[]),i=(0,e.useCallback)(a=>{c(b=>b.filter(b=>b.id!==a))},[]),j=(0,e.useCallback)(()=>{c([])},[]);return(0,d.jsxs)(f.Provider,{value:{notifications:b,addNotification:g,removeNotification:i,clearNotifications:j},children:[a,(0,d.jsx)(h,{})]})}function h(){let{notifications:a,removeNotification:b}=i();return(0,d.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:a.map(a=>(0,d.jsx)("div",{className:`
            max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden
            ${"success"===a.type?"border-l-4 border-green-400":""}
            ${"error"===a.type?"border-l-4 border-red-400":""}
            ${"warning"===a.type?"border-l-4 border-yellow-400":""}
            ${"info"===a.type?"border-l-4 border-blue-400":""}
          `,children:(0,d.jsx)("div",{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.title}),a.message&&(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a.message})]}),(0,d.jsxs)("button",{className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-500",onClick:()=>b(a.id),children:[(0,d.jsx)("span",{className:"sr-only",children:"关闭"}),(0,d.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})},a.id))})}function i(){let a=(0,e.useContext)(f);if(void 0===a)throw Error("useNotification must be used within a NotificationProvider");return a}},10444:(a,b,c)=>{"use strict";c.d(b,{Ay:()=>m,J1:()=>h,ri:()=>j});var d=c(88198),e=c(67353);let f=(0,d.zD)("auth/login",async(a,{rejectWithValue:b})=>{try{return(await e.R2.login(a)).data}catch(a){return b(a.response?.data?.message||"Login failed")}}),g=(0,d.zD)("auth/register",async(a,{rejectWithValue:b})=>{try{return(await e.R2.register(a)).data}catch(a){return b(a.response?.data?.message||"Registration failed")}}),h=(0,d.zD)("auth/refresh",async(a,{rejectWithValue:b})=>{try{return(await e.R2.refreshToken(a)).data}catch(a){return b(a.response?.data?.message||"Token refresh failed")}}),i=(0,d.Z0)({name:"auth",initialState:{user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null},reducers:{logout:a=>{a.user=null,a.token=null,a.refreshToken=null,a.isAuthenticated=!1,a.error=null},clearError:a=>{a.error=null},updateUser:(a,b)=>{a.user&&(a.user={...a.user,...b.payload})}},extraReducers:a=>{a.addCase(f.pending,a=>{a.isLoading=!0,a.error=null}).addCase(f.fulfilled,(a,b)=>{a.isLoading=!1,a.user=b.payload.user,a.token=b.payload.token,a.refreshToken=b.payload.refreshToken,a.isAuthenticated=!0,a.error=null}).addCase(f.rejected,(a,b)=>{a.isLoading=!1,a.error=b.payload,a.isAuthenticated=!1}).addCase(g.pending,a=>{a.isLoading=!0,a.error=null}).addCase(g.fulfilled,(a,b)=>{a.isLoading=!1,a.user=b.payload.user,a.token=b.payload.token,a.refreshToken=b.payload.refreshToken,a.isAuthenticated=!0,a.error=null}).addCase(g.rejected,(a,b)=>{a.isLoading=!1,a.error=b.payload}).addCase(h.fulfilled,(a,b)=>{a.token=b.payload.token,a.refreshToken=b.payload.refreshToken}).addCase(h.rejected,a=>{a.user=null,a.token=null,a.refreshToken=null,a.isAuthenticated=!1})}}),{logout:j,clearError:k,updateUser:l}=i.actions,m=i.reducer},19858:(a,b,c)=>{"use strict";c.d(b,{SkipLink:()=>h});var d=c(60687),e=c(43210),f=c(49384),g=c(87869);let h=({href:a,children:b})=>(0,d.jsx)("a",{href:a,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 glass-button glass-button-primary px-4 py-2",children:b});(0,e.forwardRef)(({variant:a="primary",size:b="md",loading:c=!1,children:e,ariaLabel:h,describedBy:i,className:j,onKeyDown:k,...l},m)=>{let{announceToScreenReader:n}=(0,g.Ws)();return(0,d.jsx)("button",{ref:m,className:(0,f.$)("glass-button focus-glass font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-opacity-75",{primary:"glass-button-primary",secondary:"glass-button-secondary",ghost:"bg-transparent border-white/20 text-white hover:bg-white/10",danger:"bg-red-500/20 border-red-300/30 text-white hover:bg-red-400/30"}[a],{sm:"px-3 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[b],(l.disabled||c)&&"opacity-50 cursor-not-allowed",j),"aria-label":h,"aria-describedby":i,"aria-busy":c,onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),a.currentTarget.click()),k?.(a)},onClick:a=>{c||(h&&n(`${h} 按钮已激活`),l.onClick?.(a))},...l,children:c?(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[(0,d.jsx)("div",{className:"loading-spinner mr-2",role:"status","aria-label":"加载中"}),(0,d.jsx)("span",{className:"sr-only",children:"加载中..."}),"string"==typeof e?"处理中...":e]}):e})}).displayName="AccessibleButton"},30767:(a,b,c)=>{"use strict";c.d(b,{ClientProviders:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call ClientProviders() from the server but ClientProviders is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/providers/ClientProviders.tsx","ClientProviders")},38610:(a,b,c)=>{Promise.resolve().then(c.bind(c,19858)),Promise.resolve().then(c.bind(c,94686))},53530:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25227,23)),Promise.resolve().then(c.t.bind(c,86346,23)),Promise.resolve().then(c.t.bind(c,27924,23)),Promise.resolve().then(c.t.bind(c,40099,23)),Promise.resolve().then(c.t.bind(c,38243,23)),Promise.resolve().then(c.t.bind(c,28827,23)),Promise.resolve().then(c.t.bind(c,62763,23)),Promise.resolve().then(c.t.bind(c,97173,23)),Promise.resolve().then(c.bind(c,25587))},58014:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>i});var d=c(37413),e=c(59258),f=c.n(e);c(82704);var g=c(30767),h=c(64564);let i={title:"KD之家 - 家务积分系统",description:"现代化家务积分管理系统",keywords:["家务","积分","管理","家庭","KD之家"],authors:[{name:"KD Family"}],creator:"KD Family",publisher:"KD Family",formatDetection:{email:!1,address:!1,telephone:!1},metadataBase:new URL(process.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000"),openGraph:{title:"KD之家 - 家务积分系统",description:"现代化家务积分管理系统",url:"/",siteName:"KD之家",images:[{url:"/og-image.png",width:1200,height:630,alt:"KD之家 - 家务积分系统"}],locale:"zh_CN",type:"website"},twitter:{card:"summary_large_image",title:"KD之家 - 家务积分系统",description:"现代化家务积分管理系统",images:["/og-image.png"]},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}},manifest:"/manifest.json",icons:{icon:[{url:"/favicon.ico"},{url:"/icons/icon-16x16.png",sizes:"16x16",type:"image/png"},{url:"/icons/icon-32x32.png",sizes:"32x32",type:"image/png"}],apple:[{url:"/icons/apple-touch-icon.png",sizes:"180x180",type:"image/png"}],other:[{rel:"mask-icon",url:"/icons/safari-pinned-tab.svg",color:"#f97316"}]},themeColor:[{media:"(prefers-color-scheme: light)",color:"#ffffff"},{media:"(prefers-color-scheme: dark)",color:"#0f172a"}],viewport:{width:"device-width",initialScale:1,maximumScale:1,userScalable:!1}};function j({children:a}){return(0,d.jsx)("html",{lang:"zh-CN",className:"h-full",children:(0,d.jsxs)("body",{className:`${f().className} h-full antialiased`,children:[(0,d.jsx)(h.SkipLink,{href:"#main-content",children:"跳转到主要内容"}),(0,d.jsx)(g.ClientProviders,{children:(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,d.jsx)("main",{id:"main-content",className:"focus:outline-none",tabIndex:-1,children:a})})})]})})}},64564:(a,b,c)=>{"use strict";c.d(b,{SkipLink:()=>e});var d=c(61369);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call SkipLink() from the server but SkipLink is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/accessibility/AccessibleComponents.tsx","SkipLink");(0,d.registerClientReference)(function(){throw Error("Attempted to call FocusTrap() from the server but FocusTrap is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/accessibility/AccessibleComponents.tsx","FocusTrap"),(0,d.registerClientReference)(function(){throw Error("Attempted to call AccessibleButton() from the server but AccessibleButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/accessibility/AccessibleComponents.tsx","AccessibleButton"),(0,d.registerClientReference)(function(){throw Error("Attempted to call LiveRegion() from the server but LiveRegion is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/accessibility/AccessibleComponents.tsx","LiveRegion"),(0,d.registerClientReference)(function(){throw Error("Attempted to call AccessibleField() from the server but AccessibleField is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/accessibility/AccessibleComponents.tsx","AccessibleField"),(0,d.registerClientReference)(function(){throw Error("Attempted to call AccessibleNav() from the server but AccessibleNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/accessibility/AccessibleComponents.tsx","AccessibleNav"),(0,d.registerClientReference)(function(){throw Error("Attempted to call AccessibleBreadcrumb() from the server but AccessibleBreadcrumb is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/accessibility/AccessibleComponents.tsx","AccessibleBreadcrumb"),(0,d.registerClientReference)(function(){throw Error("Attempted to call AccessibleTooltip() from the server but AccessibleTooltip is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kop/coding/KD_Family/components/accessibility/AccessibleComponents.tsx","AccessibleTooltip")},67353:(a,b,c)=>{"use strict";c.d(b,{Eo:()=>j,Ig:()=>l,R2:()=>i,i9:()=>m,ov:()=>k,uE:()=>h});var d=c(51060),e=c(4270),f=c(10444);let g=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api",h=d.A.create({baseURL:g,timeout:1e4,headers:{"Content-Type":"application/json"}});h.interceptors.request.use(a=>{let b=e.M.getState().auth.token;return b&&(a.headers.Authorization=`Bearer ${b}`),a},a=>Promise.reject(a)),h.interceptors.response.use(a=>a,async a=>{let b=a.config;if(a.response?.status===401&&!b._retry){b._retry=!0;let a=e.M.getState().auth.refreshToken;if(a)try{await e.M.dispatch((0,f.J1)(a));let c=e.M.getState().auth.token;if(c)return b.headers.Authorization=`Bearer ${c}`,h(b)}catch(a){e.M.dispatch((0,f.ri)()),window.location.href="/login"}else e.M.dispatch((0,f.ri)()),window.location.href="/login"}return Promise.reject(a)});let i={login:a=>h.post("/auth/login",a),register:a=>h.post("/auth/register",a),refreshToken:a=>h.post("/auth/refresh",{refreshToken:a}),logout:()=>h.post("/auth/logout")},j={getUsers:a=>h.get("/users",{params:a}),getUser:a=>h.get(`/users/${a}`),updateUser:(a,b)=>h.put(`/users/${a}`,b),deleteUser:a=>h.delete(`/users/${a}`),uploadAvatar:(a,b)=>{let c=new FormData;return c.append("avatar",b),h.post(`/users/${a}/avatar`,c,{headers:{"Content-Type":"multipart/form-data"}})}},k={getTasks:a=>h.get("/tasks",{params:a}),getTask:a=>h.get(`/tasks/${a}`),createTask:a=>h.post("/tasks",a),updateTask:(a,b)=>h.put(`/tasks/${a}`,b),deleteTask:a=>h.delete(`/tasks/${a}`),claimTask:a=>h.patch(`/tasks/${a}/claim`),completeTask:a=>h.patch(`/tasks/${a}/complete`),approveTask:a=>h.patch(`/tasks/${a}/approve`),rejectTask:(a,b)=>h.patch(`/tasks/${a}/reject`,{reason:b}),assignTask:(a,b)=>h.patch(`/tasks/${a}/assign`,{userId:b}),getTasksByUser:a=>h.get(`/users/${a}/tasks`),getTaskStats:()=>h.get("/tasks/stats"),verifyTask:a=>h.post(`/tasks/${a}/verify`)},l={getPoints:a=>h.get("/points",{params:{userId:a}}),awardPoints:a=>h.post("/points/award",a),getLeaderboard:a=>h.get("/points/leaderboard",{params:{period:a}}),getPointsHistory:a=>h.get(`/points/history/${a}`)},m={getNotifications:a=>h.get(`/notifications/${a}`),markAsRead:a=>h.put(`/notifications/${a}/read`),markAllAsRead:a=>h.put(`/notifications/${a}/read-all`),deleteNotification:a=>h.delete(`/notifications/${a}`)}},82704:()=>{},86446:(a,b,c)=>{"use strict";c.d(b,{k:()=>e});var d=c(60687);function e({size:a="md",className:b=""}){return(0,d.jsx)("div",{className:`flex items-center justify-center ${b}`,children:(0,d.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[a]} animate-spin rounded-full border-2 border-gray-300 border-t-blue-600`})})}},87869:(a,b,c)=>{"use strict";c.d(b,{Qy:()=>i,Ws:()=>h});var d=c(60687),e=c(43210);let f={highContrast:!1,reducedMotion:!1,fontSize:"md",focusRingStyle:"default",screenReaderAnnouncements:!0,keyboardNavigation:!0},g=(0,e.createContext)(null),h=()=>{let a=(0,e.useContext)(g);if(!a)throw Error("useAccessibility must be used within AccessibilityProvider");return a},i=({children:a})=>{let[b,c]=(0,e.useState)(f),[h,i]=(0,e.useState)(!1),j=(0,e.useCallback)((a,c="polite")=>{if(!b.screenReaderAnnouncements)return;let d=document.createElement("div");d.setAttribute("aria-live",c),d.setAttribute("aria-atomic","true"),d.setAttribute("class","sr-only"),d.textContent=a,document.body.appendChild(d),setTimeout(()=>{document.body.removeChild(d)},1e3)},[b.screenReaderAnnouncements]),k=(0,e.useCallback)((a,d)=>{c(b=>({...b,[a]:d}));let e={...b,[a]:d};localStorage.setItem("accessibility-settings",JSON.stringify(e)),j(`设置已更新: ${a}`)},[b,j]),l=(0,e.useCallback)(a=>{i(a),document.documentElement.classList.toggle("keyboard-user",a)},[]);return(0,e.useEffect)(()=>{let a=localStorage.getItem("accessibility-settings");if(a)try{c(JSON.parse(a))}catch(a){console.warn("Failed to parse accessibility settings:",a)}let b={reducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)"),highContrast:window.matchMedia("(prefers-contrast: more)")};b.reducedMotion.matches&&c(a=>({...a,reducedMotion:!0})),b.highContrast.matches&&c(a=>({...a,highContrast:!0}));let d=a=>{c(b=>({...b,reducedMotion:a.matches}))},e=a=>{c(b=>({...b,highContrast:a.matches}))};return b.reducedMotion.addEventListener("change",d),b.highContrast.addEventListener("change",e),()=>{b.reducedMotion.removeEventListener("change",d),b.highContrast.removeEventListener("change",e)}},[]),(0,e.useEffect)(()=>{let a=document.documentElement;a.classList.toggle("high-contrast",b.highContrast),a.classList.toggle("reduced-motion",b.reducedMotion),a.setAttribute("data-font-size",b.fontSize),a.setAttribute("data-focus-style",b.focusRingStyle),a.style.setProperty("--accessibility-font-scale",{sm:"0.875",md:"1",lg:"1.125",xl:"1.25"}[b.fontSize])},[b]),(0,e.useEffect)(()=>{let a,c=b=>{"Tab"===b.key&&(l(!0),clearTimeout(a),a=setTimeout(()=>l(!1),3e3))},d=()=>{l(!1),clearTimeout(a)};return b.keyboardNavigation&&(document.addEventListener("keydown",c),document.addEventListener("mousedown",d)),()=>{document.removeEventListener("keydown",c),document.removeEventListener("mousedown",d),clearTimeout(a)}},[b.keyboardNavigation,l]),(0,d.jsx)(g.Provider,{value:{settings:b,updateSetting:k,announceToScreenReader:j,isKeyboardUser:h,setKeyboardUser:l},children:a})}},90322:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,16133,23)),Promise.resolve().then(c.t.bind(c,16444,23)),Promise.resolve().then(c.t.bind(c,16042,23)),Promise.resolve().then(c.t.bind(c,49477,23)),Promise.resolve().then(c.t.bind(c,29345,23)),Promise.resolve().then(c.t.bind(c,12089,23)),Promise.resolve().then(c.t.bind(c,46577,23)),Promise.resolve().then(c.t.bind(c,31307,23)),Promise.resolve().then(c.t.bind(c,14817,23))},94686:(a,b,c)=>{"use strict";c.d(b,{ClientProviders:()=>n});var d=c(60687),e=c(43210),f=c.n(e),g=c(54864),h=c(55964),i=c(4270),j=c(86446),k=c(7956);class l extends f().Component{constructor(a){super(a),this.resetError=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("ErrorBoundary caught an error:",a,b)}render(){if(this.state.hasError){if(this.props.fallback){let a=this.props.fallback;return(0,d.jsx)(a,{error:this.state.error,resetError:this.resetError})}return(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,d.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,d.jsxs)("div",{className:"mt-4 text-center",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"出现了一些问题"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"应用程序遇到了意外错误。请刷新页面重试。"}),this.state.error&&(0,d.jsxs)("details",{className:"mt-4 text-left",children:[(0,d.jsx)("summary",{className:"text-sm text-gray-600 cursor-pointer",children:"错误详情"}),(0,d.jsx)("pre",{className:"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded overflow-auto",children:this.state.error.message})]}),(0,d.jsxs)("div",{className:"mt-6 flex space-x-3",children:[(0,d.jsx)("button",{onClick:this.resetError,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"重试"}),(0,d.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"刷新页面"})]})]})]})})}return this.props.children}}var m=c(87869);function n({children:a}){return(0,d.jsx)(g.Kq,{store:i.M,children:(0,d.jsx)(h.Q,{loading:(0,d.jsx)(j.k,{}),persistor:i.q,children:(0,d.jsx)(m.Qy,{children:(0,d.jsx)(l,{children:(0,d.jsx)(k.p,{children:a})})})})})}},98858:(a,b,c)=>{Promise.resolve().then(c.bind(c,64564)),Promise.resolve().then(c.bind(c,30767))}};