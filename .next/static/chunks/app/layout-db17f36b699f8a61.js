(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2742:(e,t,r)=>{"use strict";r.d(t,{SkipLink:()=>a});var s=r(5155),n=r(2115),o=r(2596),i=r(3967);let a=e=>{let{href:t,children:r}=e;return(0,s.jsx)("a",{href:t,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 glass-button glass-button-primary px-4 py-2",children:r})};(0,n.forwardRef)((e,t)=>{let{variant:r="primary",size:n="md",loading:a=!1,children:c,ariaLabel:l,describedBy:d,className:u,onKeyDown:m,...h}=e,{announceToScreenReader:g}=(0,i.Ws)();return(0,s.jsx)("button",{ref:t,className:(0,o.$)("glass-button focus-glass font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-opacity-75",{primary:"glass-button-primary",secondary:"glass-button-secondary",ghost:"bg-transparent border-white/20 text-white hover:bg-white/10",danger:"bg-red-500/20 border-red-300/30 text-white hover:bg-red-400/30"}[r],{sm:"px-3 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[n],(h.disabled||a)&&"opacity-50 cursor-not-allowed",u),"aria-label":l,"aria-describedby":d,"aria-busy":a,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.currentTarget.click()),null==m||m(e)},onClick:e=>{var t;a||(l&&g("".concat(l," 按钮已激活")),null==(t=h.onClick)||t.call(h,e))},...h,children:a?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"loading-spinner mr-2",role:"status","aria-label":"加载中"}),(0,s.jsx)("span",{className:"sr-only",children:"加载中..."}),"string"==typeof c?"处理中...":c]}):c})}).displayName="AccessibleButton"},3967:(e,t,r)=>{"use strict";r.d(t,{Qy:()=>c,Ws:()=>a});var s=r(5155),n=r(2115);let o={highContrast:!1,reducedMotion:!1,fontSize:"md",focusRingStyle:"default",screenReaderAnnouncements:!0,keyboardNavigation:!0},i=(0,n.createContext)(null),a=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useAccessibility must be used within AccessibilityProvider");return e},c=e=>{let{children:t}=e,[r,a]=(0,n.useState)(o),[c,l]=(0,n.useState)(!1),d=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite";if(!r.screenReaderAnnouncements)return;let s=document.createElement("div");s.setAttribute("aria-live",t),s.setAttribute("aria-atomic","true"),s.setAttribute("class","sr-only"),s.textContent=e,document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s)},1e3)},[r.screenReaderAnnouncements]),u=(0,n.useCallback)((e,t)=>{a(r=>({...r,[e]:t}));let s={...r,[e]:t};localStorage.setItem("accessibility-settings",JSON.stringify(s)),d("设置已更新: ".concat(e))},[r,d]),m=(0,n.useCallback)(e=>{l(e),document.documentElement.classList.toggle("keyboard-user",e)},[]);return(0,n.useEffect)(()=>{let e=localStorage.getItem("accessibility-settings");if(e)try{a(JSON.parse(e))}catch(e){console.warn("Failed to parse accessibility settings:",e)}let t={reducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)"),highContrast:window.matchMedia("(prefers-contrast: more)")};t.reducedMotion.matches&&a(e=>({...e,reducedMotion:!0})),t.highContrast.matches&&a(e=>({...e,highContrast:!0}));let r=e=>{a(t=>({...t,reducedMotion:e.matches}))},s=e=>{a(t=>({...t,highContrast:e.matches}))};return t.reducedMotion.addEventListener("change",r),t.highContrast.addEventListener("change",s),()=>{t.reducedMotion.removeEventListener("change",r),t.highContrast.removeEventListener("change",s)}},[]),(0,n.useEffect)(()=>{let e=document.documentElement;e.classList.toggle("high-contrast",r.highContrast),e.classList.toggle("reduced-motion",r.reducedMotion),e.setAttribute("data-font-size",r.fontSize),e.setAttribute("data-focus-style",r.focusRingStyle),e.style.setProperty("--accessibility-font-scale",{sm:"0.875",md:"1",lg:"1.125",xl:"1.25"}[r.fontSize])},[r]),(0,n.useEffect)(()=>{let e,t=t=>{"Tab"===t.key&&(m(!0),clearTimeout(e),e=setTimeout(()=>m(!1),3e3))},s=()=>{m(!1),clearTimeout(e)};return r.keyboardNavigation&&(document.addEventListener("keydown",t),document.addEventListener("mousedown",s)),()=>{document.removeEventListener("keydown",t),document.removeEventListener("mousedown",s),clearTimeout(e)}},[r.keyboardNavigation,m]),(0,s.jsx)(i.Provider,{value:{settings:r,updateSetting:u,announceToScreenReader:d,isKeyboardUser:c,setKeyboardUser:m},children:t})}},4542:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.bind(r,2742)),Promise.resolve().then(r.bind(r,5659)),Promise.resolve().then(r.t.bind(r,5299,23))},5659:(e,t,r)=>{"use strict";r.d(t,{ClientProviders:()=>m});var s=r(5155),n=r(2115),o=r(4540),i=r(7730),a=r(6243),c=r(3840),l=r(3320);class d extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){if(this.state.hasError){if(this.props.fallback){let e=this.props.fallback;return(0,s.jsx)(e,{error:this.state.error,resetError:this.resetError})}return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"mt-4 text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"出现了一些问题"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"应用程序遇到了意外错误。请刷新页面重试。"}),this.state.error&&(0,s.jsxs)("details",{className:"mt-4 text-left",children:[(0,s.jsx)("summary",{className:"text-sm text-gray-600 cursor-pointer",children:"错误详情"}),(0,s.jsx)("pre",{className:"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded overflow-auto",children:this.state.error.message})]}),(0,s.jsxs)("div",{className:"mt-6 flex space-x-3",children:[(0,s.jsx)("button",{onClick:this.resetError,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"重试"}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"刷新页面"})]})]})]})})}return this.props.children}constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}}var u=r(3967);function m(e){let{children:t}=e;return(0,s.jsx)(o.Kq,{store:a.M,children:(0,s.jsx)(i.Q,{loading:(0,s.jsx)(c.k,{}),persistor:a.q,children:(0,s.jsx)(u.Qy,{children:(0,s.jsx)(d,{children:(0,s.jsx)(l.p,{children:t})})})})})}},9324:()=>{}},e=>{e.O(0,[618,96,76,358],()=>e(e.s=4542)),_N_E=e.O()}]);