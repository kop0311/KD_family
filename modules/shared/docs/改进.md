    name="description"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>ä»»åŠ¡æè¿°</FormLabel>
                    <FormControl>
                      <Textarea 
                        placeholder="è¯¦ç»†æè¿°ä»»åŠ¡å†…å®¹"
                        className="min-h-[100px]"
                        {...field}
                      />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <div className="grid grid-cols-2 gap-4">
                <FormField
                  control={form.control}
                  name="points"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>ç§¯åˆ†å¥–åŠ±</FormLabel>
                      <FormControl>
                        <Input
                          type="number"
                          min="1"
                          {...field}
                          onChange={(e) => field.onChange(Number(e.target.value))}
                        />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <FormField
                  control={form.control}
                  name="dueDate"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>æˆªæ­¢æ—¥æœŸ</FormLabel>
                      <FormControl>
                        <Input
                          type="datetime-local"
                          {...field}
                          value={field.value ? format(field.value, "yyyy-MM-dd'T'HH:mm") : ''}
                          onChange={(e) => field.onChange(new Date(e.target.value))}
                        />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />
              </div>

              <div className="flex justify-between">
                <Button
                  type="button"
                  variant="ghost"
                  onClick={() => navigate('/tasks')}
                >
                  å–æ¶ˆ
                </Button>
                <Button
                  type="submit"
                  disabled={createTaskMutation.isLoading}
                >
                  {createTaskMutation.isLoading ? (
                    <Loader2 className="w-4 h-4 animate-spin mr-2" />
                  ) : null}
                  åˆ›å»ºä»»åŠ¡
                </Button>
              </div>
            </div>
          </form>
        </GlassContainer>
      </div>
    );
  };

  2.4 ç”¨æˆ·ç®¡ç†åŠŸèƒ½ (1-2å¤©)

  Day 8-9: ä¸ªäººèµ„æ–™å’Œæ’è¡Œæ¦œ
  // src/features/profile/UserProfile.tsx
  export const UserProfile: React.FC = () => {
    const { user, updateUser } = useAuth();
    const [isEditing, setIsEditing] = useState(false);
    const [avatar, setAvatar] = useState<File | null>(null);

    const updateProfileMutation = useMutation(
      (profileData: UpdateProfileData) => api.put(`/api/users/${user.id}`, profileData),
      {
        onSuccess: (updatedUser) => {
          updateUser(updatedUser);
          setIsEditing(false);
          showNotification('ä¸ªäººèµ„æ–™æ›´æ–°æˆåŠŸ', 'success');
        }
      }
    );

    const uploadAvatarMutation = useMutation(
      (file: File) => {
        const formData = new FormData();
        formData.append('avatar', file);
        return api.post(`/api/users/${user.id}/avatar`, formData);
      },
      {
        onSuccess: (response) => {
          updateUser({ ...user, avatar: response.data.avatarUrl });
          showNotification('å¤´åƒä¸Šä¼ æˆåŠŸ', 'success');
        }
      }
    );

    return (
      <div className="max-w-4xl mx-auto space-y-6">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <GlassContainer className="p-6 lg:col-span-1">
            <div className="text-center">
              <div className="relative inline-block">
                <Avatar className="w-24 h-24 mx-auto">
                  <AvatarImage src={user.avatar} />
                  <AvatarFallback>{user.name[0]}</AvatarFallback>
                </Avatar>
                <Button
                  size="sm"
                  variant="ghost"
                  className="absolute bottom-0 right-0"
                  onClick={() => document.getElementById('avatar-upload')?.click()}
                >
                  <Camera className="w-4 h-4" />
                </Button>
                <input
                  id="avatar-upload"
                  type="file"
                  accept="image/*"
                  className="hidden"
                  onChange={(e) => {
                    const file = e.target.files?.[0];
                    if (file) uploadAvatarMutation.mutate(file);
                  }}
                />
              </div>
              <h2 className="text-xl font-bold text-white mt-4">{user.name}</h2>
              <p className="text-white/70">{user.email}</p>
            </div>
          </GlassContainer>

          <GlassContainer className="p-6 lg:col-span-2">
            <div className="flex justify-between items-center mb-4">
              <h3 className="text-lg font-semibold text-white">ä¸ªäººä¿¡æ¯</h3>
              <Button
                variant="ghost"
                size="sm"
                onClick={() => setIsEditing(!isEditing)}
              >
                <Edit className="w-4 h-4 mr-2" />
                {isEditing ? 'å–æ¶ˆ' : 'ç¼–è¾‘'}
              </Button>
            </div>

            {isEditing ? (
              <ProfileEditForm
                user={user}
                onSubmit={(data) => updateProfileMutation.mutate(data)}
                isLoading={updateProfileMutation.isLoading}
              />
            ) : (
              <ProfileDisplay user={user} />
            )}
          </GlassContainer>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          <StatCard title="æ€»ç§¯åˆ†" value={user.totalPoints} icon={<Trophy />} />
          <StatCard title="å®Œæˆä»»åŠ¡" value={user.completedTasks} icon={<CheckCircle />} />
          <StatCard title="å½“å‰ç­‰çº§" value={user.level} icon={<Star />} />
        </div>
      </div>
    );
  };

  // src/features/leaderboard/Leaderboard.tsx
  export const Leaderboard: React.FC = () => {
    const { data: rankings, isLoading } = useQuery(
      ['leaderboard'],
      () => api.get('/api/leaderboard')
    );

    return (
      <div className="space-y-6">
        <h1 className="text-2xl font-bold text-white">å®¶åº­æ’è¡Œæ¦œ</h1>

        <div className="grid gap-4">
          {rankings?.map((user, index) => (
            <GlassContainer key={user.id} className="p-4">
              <div className="flex items-center space-x-4">
                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${
                  index === 0 ? 'bg-yellow-500' :
                  index === 1 ? 'bg-gray-400' :
                  index === 2 ? 'bg-amber-600' : 'bg-white/20'
                }`}>
                  <span className="font-bold text-white">{index + 1}</span>
                </div>

                <Avatar>
                  <AvatarImage src={user.avatar} />
                  <AvatarFallback>{user.name[0]}</AvatarFallback>
                </Avatar>

                <div className="flex-1">
                  <h3 className="font-semibold text-white">{user.name}</h3>
                  <p className="text-white/70 text-sm">ç­‰çº§ {user.level}</p>
                </div>

                <div className="text-right">
                  <p className="text-2xl font-bold text-white">{user.totalPoints}</p>
                  <p className="text-white/70 text-sm">ç§¯åˆ†</p>
                </div>
              </div>
            </GlassContainer>
          ))}
        </div>
      </div>
    );
  };

  ---
  ğŸ“… Phase 3: Magic UI é›†æˆ (3-4å¤©)

  3.1 Magic UI è®¾ç½®å’ŒåŸºç¡€ç»„ä»¶æ›¿æ¢ (2å¤©)

  æŠ€æœ¯ç›®æ ‡

  - å®‰è£…å¹¶é…ç½®Magic UIç»„ä»¶åº“
  - æ›¿æ¢åŸºç¡€UIç»„ä»¶ä¿æŒè®¾è®¡ä¸€è‡´æ€§
  - ç¡®ä¿glass-morphismæ•ˆæœå…¼å®¹

  Day 10-11: Magic UI é›†æˆ
  # å®‰è£…Magic UI
  npm install @magic-ui/react framer-motion

  # é…ç½®Tailwind CSSæ”¯æŒMagic UI

  // tailwind.config.js æ›´æ–°
  module.exports = {
    content: [
      './src/**/*.{js,ts,jsx,tsx}',
      './node_modules/@magic-ui/react/**/*.{js,ts,jsx,tsx}'
    ],
    theme: {
      extend: {
        // Magic UI ä¸»é¢˜é…ç½®
        keyframes: {
          'magic-fade-in': {
            '0%': { opacity: '0', transform: 'translateY(10px)' },
            '100%': { opacity: '1', transform: 'translateY(0)' }
          }
        },
        animation: {
          'magic-fade-in': 'magic-fade-in 0.3s ease-out'
        }
      }
    }
  };

  // src/components/ui/enhanced/MagicButton.tsx
  import { Button as MagicButton } from '@magic-ui/react';
  import { cn } from '@/lib/utils';

  export const Button: React.FC<ButtonProps> = ({ 
    className, 
    variant = 'default',
    ...props 
  }) => {
    const glassStyles = {
      default: 'bg-white/10 backdrop-blur-md border border-white/20 hover:bg-white/20',
      primary: 'bg-blue-500/20 backdrop-blur-md border border-blue-300/30 hover:bg-blue-500/30',
      secondary: 'bg-purple-500/20 backdrop-blur-md border border-purple-300/30 hover:bg-purple-500/30'
    };

    return (
      <MagicButton
        className={cn(
          'text-white shadow-glass transition-all duration-300',
          glassStyles[variant],
          className
        )}
        {...props}
      />
    );
  };

  // src/components/ui/enhanced/MagicCard.tsx
  import { Card as MagicCard } from '@magic-ui/react';

  export const GlassContainer: React.FC<GlassContainerProps> = ({ 
    children, 
    className,
    ...props 
  }) => {
    return (
      <MagicCard
        className={cn(
          'bg-white/10 backdrop-blur-md border border-white/20 shadow-glass',
          'rounded-xl p-4 transition-all duration-300 hover:bg-white/15',
          className
        )}
        {...props}
      >
        {children}
      </MagicCard>
    );
  };

  3.2 åŠ¨ç”»å’Œäº¤äº’å¢å¼º (1-2å¤©)

  Day 12-13: é«˜çº§åŠ¨ç”»å’Œå¾®äº¤äº’
  // src/components/ui/enhanced/AnimatedComponents.tsx
  import { motion } from 'framer-motion';
  import { Sparkles, ShimmerButton } from '@magic-ui/react';

  export const AnimatedTaskCard: React.FC<TaskCardProps> = ({ task, ...props }) => {
    return (
      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        exit={{ opacity: 0, y: -20 }}
        whileHover={{ scale: 1.02 }}
        transition={{ duration: 0.2 }}
      >
        <GlassContainer className="relative overflow-hidden">
          <Sparkles className="absolute inset-0 opacity-30" />
          <TaskCard task={task} {...props} />
        </GlassContainer>
      </motion.div>
    );
  };

  export const CompletionButton: React.FC<{ onComplete: () => void }> = ({ onComplete }) => {
    return (
      <ShimmerButton
        onClick={onComplete}
        className="bg-green-500/20 border-green-300/30"
        shimmerColor="rgba(34, 197, 94, 0.3)"
      >
        <CheckCircle className="w-4 h-4 mr-2" />
        å®Œæˆä»»åŠ¡
      </ShimmerButton>
    );
  };

  // src/components/ui/enhanced/StatsDisplay.tsx
  import { NumberTicker, GradientText } from '@magic-ui/react';

  export const AnimatedStatCard: React.FC<StatCardProps> = ({ 
    title, 
    value, 
    icon, 
    trend 
  }) => {
    return (
      <motion.div
        whileHover={{ y: -5 }}
        transition={{ duration: 0.2 }}
      >
        <GlassContainer className="p-6">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-white/70 text-sm">{title}</p>
              <GradientText
                className="text-3xl font-bold"
                colors={['#3B82F6', '#8B5CF6', '#06B6D4']}
              >
                <NumberTicker value={value} />
              </GradientText>
              <p className="text-green-400 text-sm">{trend}</p>
            </div>
            <motion.div
              animate={{ rotate: [0, 5, -5, 0] }}
              transition={{ duration: 2, repeat: Infinity }}
              className="text-white/50"
            >
              {icon}
            </motion.div>
          </div>
        </GlassContainer>
      </motion.div>
    );
  };

  ---
  ğŸ“… Phase 4: PWA åŠŸèƒ½å®ç° (5-6å¤©)

  4.1 Service Worker å’Œç¦»çº¿ç­–ç•¥ (2-3å¤©)

  æŠ€æœ¯ç›®æ ‡

  - å®ç°æ™ºèƒ½ç¼“å­˜ç­–ç•¥
  - ç¦»çº¿æ•°æ®åŒæ­¥
  - åå°æ›´æ–°æœºåˆ¶

  Day 14-15: Service Worker åŸºç¡€è®¾æ–½
  // vite.config.ts PWA é…ç½®
  import { VitePWA } from 'vite-plugin-pwa';

  export default defineConfig({
    plugins: [
      react(),
      VitePWA({
        registerType: 'autoUpdate',
        workbox: {
          globPatterns: ['**/*.{js,css,html,ico,png,svg,woff2}'],
          runtimeCaching: [
            {
              urlPattern: /^https:\/\/api\./,
              handler: 'NetworkFirst',
              options: {
                cacheName: 'api-cache',
                expiration: {
                  maxEntries: 100,
                  maxAgeSeconds: 24 * 60 * 60 // 24å°æ—¶
                },
                networkTimeoutSeconds: 10
              }
            },
            {
              urlPattern: /^https:\/\/.*\.(?:png|jpg|jpeg|svg|gif)$/,
              handler: 'CacheFirst',
              options: {
                cacheName: 'images-cache',
                expiration: {
                  maxEntries: 50,
                  maxAgeSeconds: 30 * 24 * 60 * 60 // 30å¤©
                }
              }
            }
          ]
        },
        manifest: {
          name: 'KD Family å®¶åº­ä»»åŠ¡ç®¡ç†',
          short_name: 'KD Family',
          description: 'ç°ä»£åŒ–çš„å®¶åº­ä»»åŠ¡ç®¡ç†å’Œç§¯åˆ†ç³»ç»Ÿ',
          theme_color: '#3B82F6',
          background_color: '#1E293B',
          display: 'standalone',
          orientation: 'portrait',
          scope: '/',
          start_url: '/',
          icons: [
            {
              src: '/icons/icon-72x72.png',
              sizes: '72x72',
              type: 'image/png',
              purpose: 'any maskable'
            },
            {
              src: '/icons/icon-192x192.png',
              sizes: '192x192',
              type: 'image/png'
            },
            {
              src: '/icons/icon-512x512.png',
              sizes: '512x512',
              type: 'image/png'
            }
          ]
        }
      })
    ]
  });

  // src/hooks/usePWA.ts
  export const usePWA = () => {
    const [isOnline, setIsOnline] = useState(navigator.onLine);
    const [updateAvailable, setUpdateAvailable] = useState(false);
    const [deferredPrompt, setDeferredPrompt] = useState<any>(null);

    useEffect(() => {
      const handleOnline = () => setIsOnline(true);
      const handleOffline = () => setIsOnline(false);

      window.addEventListener('online', handleOnline);
      window.addEventListener('offline', handleOffline);

      // PWAå®‰è£…æç¤º
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        setDeferredPrompt(e);
      });

      return () => {
        window.removeEventListener('online', handleOnline);
        window.removeEventListener('offline', handleOffline);
      };
    }, []);

    const installPWA = async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === 'accepted') {
          setDeferredPrompt(null);
        }
      }
    };

    return {
      isOnline,
      updateAvailable,
      canInstall: !!deferredPrompt,
      installPWA
    };
  };

  Day 16: ç¦»çº¿æ•°æ®ç®¡ç†
  // src/services/offlineManager.ts
  class OfflineManager {
    private pendingActions: OfflineAction[] = [];
    private storeName = 'offline-actions';

    async addAction(action: OfflineAction) {
      this.pendingActions.push(action);
      await this.persistActions();
    }

    async syncWhenOnline() {
      if (!navigator.onLine) return;

      const actions = await this.getStoredActions();
      for (const action of actions) {
        try {
          await this.executeAction(action);
          this.removeAction(action.id);
        } catch (error) {
          console.error('ç¦»çº¿åŒæ­¥å¤±è´¥:', error);
        }
      }
    }

    private async executeAction(action: OfflineAction) {
      switch (action.type) {
        case 'CREATE_TASK':
          return api.post('/api/tasks', action.data);
        case 'UPDATE_TASK':
          return api.put(`/api/tasks/${action.data.id}`, action.data);
        case 'COMPLETE_TASK':
          return api.patch(`/api/tasks/${action.data.id}/complete`);
        default:
          throw new Error(`æœªçŸ¥çš„ç¦»çº¿æ“ä½œ: ${action.type}`);
      }
    }

    private async persistActions() {
      localStorage.setItem(this.storeName, JSON.stringify(this.pendingActions));
    }

    private async getStoredActions(): Promise<OfflineAction[]> {
      const stored = localStorage.getItem(this.storeName);
      return stored ? JSON.parse(stored) : [];
    }
  }

  export const offlineManager = new OfflineManager();

  // src/components/common/OfflineIndicator.tsx
  export const OfflineIndicator: React.FC = () => {
    const { isOnline } = usePWA();

    if (isOnline) return null;

    return (
      <div className="fixed top-4 right-4 z-50">
        <GlassContainer className="p-3 bg-orange-500/20 border-orange-300/30">
          <div className="flex items-center space-x-2">
            <WifiOff className="w-4 h-4 text-orange-300" />
            <span className="text-white text-sm">ç¦»çº¿æ¨¡å¼</span>
          </div>
        </GlassContainer>
      </div>
    );
  };

  4.2 æ¨é€é€šçŸ¥å’Œå®‰è£…æç¤º (2å¤©)

  Day 17-18: æ¨é€é€šçŸ¥ç³»ç»Ÿ
  // src/services/notificationManager.ts
  class NotificationManager {
    async requestPermission(): Promise<boolean> {
      if ('Notification' in window) {
        const permission = await Notification.requestPermission();
        return permission === 'granted';
      }
      return false;
    }

    async sendNotification(title: string, options: NotificationOptions = {}) {
      if (await this.requestPermission()) {
        const registration = await navigator.serviceWorker.ready;
        await registration.showNotification(title, {
          badge: '/icons/badge-72x72.png',
          icon: '/icons/icon-192x192.png',
          vibrate: [200, 100, 200],
          ...options
        });
      }
    }

    async scheduleTaskReminder(task: Task) {
      const reminderTime = new Date(task.dueDate).getTime() - Date.now() - (2 * 60 * 60 * 1000); // 2å°æ—¶å‰æé†’

      if (reminderTime > 0) {
        setTimeout(() => {
          this.sendNotification('ä»»åŠ¡æé†’', {
            body: `ä»»åŠ¡ "${task.title}" å°†åœ¨2å°æ—¶ååˆ°æœŸ`,
            tag: `task-reminder-${task.id}`,
            data: { taskId: task.id }
          });
        }, reminderTime);
      }
    }
  }

  export const notificationManager = new NotificationManager();

  // src/components/common/InstallPrompt.tsx
  export const InstallPrompt: React.FC = () => {
    const { canInstall, installPWA } = usePWA();
    const [showPrompt, setShowPrompt] = useState(false);

    useEffect(() => {
      if (canInstall) {
        // å»¶è¿Ÿæ˜¾ç¤ºå®‰è£…æç¤º
        setTimeout(() => setShowPrompt(true), 10000);
      }
    }, [canInstall]);

    if (!showPrompt) return null;

    return (
      <AnimatePresence>
        <motion.div
          initial={{ opacity: 0, y: 50 }}
          animate={{ opacity: 1, y: 0 }}
          exit={{ opacity: 0, y: 50 }}
          className="fixed bottom-4 left-4 right-4 z-50"
        >
          <GlassContainer className="p-4">
            <div className="flex items-center justify-between">
              <div className="flex-1">
                <h3 className="font-semibold text-white">å®‰è£…åº”ç”¨</h3>
                <p className="text-white/70 text-sm">
                  å°†KD Familyæ·»åŠ åˆ°ä¸»å±å¹•ï¼Œè·å¾—æ›´å¥½çš„ä½¿ç”¨ä½“éªŒ
                </p>
              </div>
              <div className="flex space-x-2">
                <Button
                  variant="ghost"
                  size="sm"
                  onClick={() => setShowPrompt(false)}
                >
                  ç¨å
                </Button>
                <Button
                  size="sm"
                  onClick={installPWA}
                >
                  å®‰è£…
                </Button>
              </div>
            </div>
          </GlassContainer>
        </motion.div>
      </AnimatePresence>
    );
  };

  4.3 æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜ç­–ç•¥ (1å¤©)

  Day 19: æ€§èƒ½ä¼˜åŒ–
  // src/utils/performance.ts
  export const lazyWithPreload = <T extends ComponentType<any>>(
    factory: () => Promise<{ default: T }>
  ) => {
    const LazyComponent = lazy(factory);
    LazyComponent.preload = factory;
    return LazyComponent;
  };

  // é¢„åŠ è½½å…³é”®ç»„ä»¶
  export const Dashboard = lazyWithPreload(() => import('@/features/dashboard/Dashboard'));
  export const TaskList = lazyWithPreload(() => import('@/features/tasks/TaskList'));

  // src/hooks/useIntersectionObserver.ts
  export const useIntersectionObserver = (
    callback: IntersectionObserverCallback,
    options?: IntersectionObserverInit
  ) => {
    const targetRef = useRef<HTMLElement>(null);

    useEffect(() => {
      const target = targetRef.current;
      if (!target) return;

      const observer = new IntersectionObserver(callback, options);
      observer.observe(target);

      return () => observer.disconnect();
    }, [callback, options]);

    return targetRef;
  };

  // src/components/common/LazyImage.tsx
  export const LazyImage: React.FC<LazyImageProps> = ({ src, alt, ...props }) => {
    const [isLoaded, setIsLoaded] = useState(false);
    const [isInView, setIsInView] = useState(false);

    const imageRef = useIntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsInView(true);
        }
      },
      { threshold: 0.1 }
    );

    return (
      <div ref={imageRef} className="relative overflow-hidden">
        {isInView && (
          <img
            src={src}
            alt={alt}
            onLoad={() => setIsLoaded(true)}
            className={cn(
              'transition-opacity duration-300',
              isLoaded ? 'opacity-100' : 'opacity-0',
              props.className
            )}
            {...props}
          />
        )}
        {!isLoaded && (
          <div className="absolute inset-0 bg-white/10 animate-pulse" />
        )}
      </div>
    );
  };

  ---
  ğŸ“… Phase 5: æµ‹è¯•å’Œä¼˜åŒ– (3-4å¤©)

  5.1 æµ‹è¯•è¦†ç›– (2å¤©)

  Day 20-21: å…¨é¢æµ‹è¯•å®æ–½
  // src/components/__tests__/TaskCard.test.tsx
  import { render, screen, fireEvent, waitFor } from '@testing-library/react';
  import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
  import { TaskCard } from '../tasks/TaskCard';

  const createWrapper = () => {
    const queryClient = new QueryClient({
      defaultOptions: { queries: { retry: false } }
    });

    return ({ children }: { children: React.ReactNode }) => (
      <QueryClientProvider client={queryClient}>
        {children}
      </QueryClientProvider>
    );
  };

  describe('TaskCard', () => {
    const mockTask = {
      id: '1',
      title: 'æµ‹è¯•ä»»åŠ¡',
      description: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡',
      status: 'pending',
      points: 10,
      dueDate: new Date('2024-12-31')
    };

    it('åº”è¯¥æ¸²æŸ“ä»»åŠ¡ä¿¡æ¯', () => {
      render(<TaskCard task={mockTask} onUpdate={jest.fn()} />, {
        wrapper: createWrapper()
      });

      expect(screen.getByText('æµ‹è¯•ä»»åŠ¡')).toBeInTheDocument();
      expect(screen.getByText('è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡')).toBeInTheDocument();
      expect(screen.getByText('ç§¯åˆ†: 10')).toBeInTheDocument();
    });

    it('åº”è¯¥å¤„ç†ä»»åŠ¡å®Œæˆ', async () => {
      const mockOnUpdate = jest.fn();
      render(<TaskCard task={mockTask} onUpdate={mockOnUpdate} />, {
        wrapper: createWrapper()
      });

      const completeButton = screen.getByText('å®Œæˆ');
      fireEvent.click(completeButton);

      await waitFor(() => {
        expect(mockOnUpdate).toHaveBeenCalledWith({
          ...mockTask,
          status: 'completed',
          completedAt: expect.any(Date)
        });
      });
    });
  });

  // src/hooks/__tests__/useAuth.test.ts
  import { renderHook, act } from '@testing-library/react';
  import { useAuth } from '../useAuth';

  // Mock API
  jest.mock('@/services/api', () => ({
    post: jest.fn(),
    get: jest.fn()
  }));

  describe('useAuth', () => {
    beforeEach(() => {
      localStorage.clear();
      jest.clearAllMocks();
    });

    it('åº”è¯¥å¤„ç†ç”¨æˆ·ç™»å½•', async () => {
      const mockUser = { id: '1', name: 'æµ‹è¯•ç”¨æˆ·', email: 'test@example.com' };
      (api.post as jest.Mock).mockResolvedValue({
        data: { token: 'test-token', user: mockUser }
      });

      const { result } = renderHook(() => useAuth());

      await act(async () => {
        await result.current.login({ username: 'test', password: 'password' });
      });

      expect(result.current.user).toEqual(mockUser);
      expect(localStorage.getItem('token')).toBe('test-token');
    });
  });

  // tests/e2e/task-management.spec.ts
  import { test, expect } from '@playwright/test';

  test.describe('ä»»åŠ¡ç®¡ç†åŠŸèƒ½', () => {
    test.beforeEach(async ({ page }) => {
      // ç™»å½•
      await page.goto('/login');
      await page.fill('[placeholder="ç”¨æˆ·å"]', 'testuser');
      await page.fill('[placeholder="å¯†ç "]', 'password');
      await page.click('button[type="submit"]');
      await page.waitForURL('/dashboard');
    });

    test('åº”è¯¥èƒ½åˆ›å»ºæ–°ä»»åŠ¡', async ({ page }) => {
      await page.click('text=åˆ›å»ºä»»åŠ¡');
      await page.waitForURL('/tasks/create');

      await page.fill('[placeholder="è¾“å…¥ä»»åŠ¡æ ‡é¢˜"]', 'æµ‹è¯•ä»»åŠ¡');
      await page.fill('[placeholder="è¯¦ç»†æè¿°ä»»åŠ¡å†…å®¹"]', 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡æè¿°');
      await page.fill('input[type="number"]', '15');

      await page.click('button[type="submit"]');
      await page.waitForURL('/tasks');

      await expect(page.locator('text=æµ‹è¯•ä»»åŠ¡')).toBeVisible();
    });

    test('åº”è¯¥èƒ½å®Œæˆä»»åŠ¡', async ({ page }) => {
      await page.goto('/tasks');

      // æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¾…å®Œæˆä»»åŠ¡
      const firstTask = page.locator('[data-testid="task-card"]').first();
      await expect(firstTask).toBeVisible();

      // ç‚¹å‡»å®ŒæˆæŒ‰é’®
      await firstTask.locator('button:has-text("å®Œæˆ")').click();

      // éªŒè¯ä»»åŠ¡çŠ¶æ€æ›´æ–°
      await expect(firstTask.locator('text=å·²å®Œæˆ')).toBeVisible();
    });

    test('PWAå®‰è£…æç¤ºåº”è¯¥æ˜¾ç¤º', async ({ page }) => {
      // æ¨¡æ‹ŸPWAå®‰è£…æç¤º
      await page.addInitScript(() => {
        window.addEventListener('beforeinstallprompt', (e) => {
          // è§¦å‘å®‰è£…æç¤ºæ˜¾ç¤º
        });
      });

      await page.goto('/dashboard');

      // ç­‰å¾…å®‰è£…æç¤ºæ˜¾ç¤º
      await expect(page.locator('text=å®‰è£…åº”ç”¨')).toBeVisible({ timeout: 15000 });
    });
  });

  5.2 æ€§èƒ½ä¼˜åŒ–å’Œéƒ¨ç½²å‡†å¤‡ (1-2å¤©)

  Day 22-23: æœ€ç»ˆä¼˜åŒ–
  # æ€§èƒ½åˆ†æè„šæœ¬
  #!/bin/bash
  # scripts/analyze-bundle.sh

  echo "ğŸ” åˆ†æåŒ…å¤§å°..."
  npm run build
  npm run analyze

  echo "ğŸ§ª è¿è¡Œæ€§èƒ½æµ‹è¯•..."
  npm run test:e2e -- --project=performance

  echo "ğŸ“Š ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š..."
  npx lighthouse http://localhost:4173 --output=html --output-path=./reports/lighthouse.html

  echo "âœ… æ€§èƒ½åˆ†æå®Œæˆï¼ŒæŸ¥çœ‹ ./reports/ ç›®å½•"

  // src/utils/monitoring.ts
  export const performanceMonitor = {
    measurePageLoad: () => {
      if ('performance' in window) {
        const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;
        const metrics = {
          ttfb: navigation.responseStart - navigation.requestStart,
          fcp: performance.getEntriesByName('first-contentful-paint')[0]?.startTime || 0,
          lcp: 0, // éœ€è¦é€šè¿‡ PerformanceObserver è·å–
          cls: 0, // éœ€è¦é€šè¿‡ PerformanceObserver è·å–
          fid: 0  // éœ€è¦é€šè¿‡ PerformanceObserver è·å–
        };

        console.table(metrics);
        return metrics;
      }
    },

    measureComponentRender: (componentName: string) => {
      return {
        start: () => performance.mark(`${componentName}-start`),
        end: () => {
          performance.mark(`${componentName}-end`);
          performance.measure(componentName, `${componentName}-start`, `${componentName}-end`);
          const measure = performance.getEntriesByName(componentName)[0];
          console.log(`${componentName} æ¸²æŸ“æ—¶é—´: ${measure.duration.toFixed(2)}ms`);
        }
      };
    }
  };

  // ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é…ç½®
  // docker-compose.prod.yml
  version: '3.8'
  services:
    app:
      build:
        context: .
        dockerfile: Dockerfile.prod
      ports:
        - "3000:3000"
      environment:
        - NODE_ENV=production
        - API_URL=https://api.kdfamily.com
      volumes:
        - ./uploads:/app/uploads

    nginx:
      image: nginx:alpine
      ports:
        - "80:80"
        - "443:443"
      volumes:
        - ./nginx.conf:/etc/nginx/nginx.conf
        - ./ssl:/etc/nginx/ssl
      depends_on:
        - app