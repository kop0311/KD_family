<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理员控制台 - KD之家</title>
    <link rel="stylesheet" href="styles/modern-design.css">
    <link rel="stylesheet" href="styles/admin-dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>加载中...</p>
    </div>

    <!-- Alert Container -->
    <div id="alertContainer" class="alert-container"></div>

    <!-- Header -->
    <header class="header-modern">
        <div class="header-content">
            <div class="header-left">
                <h1 class="header-title">
                    <img src="./assets/logo.svg" alt="KD之家" class="header-logo">
                    <span class="header-text">KD之家</span>
                    <span class="admin-badge">管理员控制台</span>
                </h1>
            </div>
            <div class="header-right">
                <div class="user-info" id="headerUserInfo">
                    <img id="userAvatar" src="/assets/default-avatar.svg" alt="Avatar" class="user-avatar">
                    <span id="userName">管理员</span>
                </div>
                <button class="btn-outline btn-modern" id="backToMainBtn">返回主页</button>
                <button class="btn-danger btn-modern" id="logoutBtn">退出登录</button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="admin-container">
        <!-- Sidebar Navigation -->
        <nav class="admin-sidebar">
            <div class="sidebar-content">
                <div class="nav-section">
                    <h3 class="nav-section-title">主要功能</h3>
                    <button class="nav-btn active" data-section="overview" id="overviewBtn">
                        📊 概览仪表板
                    </button>
                    <button class="nav-btn" data-section="users" id="usersBtn">
                        👥 用户管理
                    </button>
                    <button class="nav-btn" data-section="content" id="contentBtn">
                        📝 内容管理
                    </button>
                    <button class="nav-btn" data-section="analytics" id="analyticsBtn">
                        📈 数据分析
                    </button>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-section-title">系统设置</h3>
                    <button class="nav-btn" data-section="settings" id="settingsBtn">
                        ⚙️ 系统配置
                    </button>
                    <button class="nav-btn" data-section="logs" id="logsBtn">
                        📋 活动日志
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="admin-main">
            <!-- Overview Section -->
            <section id="overview" class="admin-section active">
                <div class="section-header">
                    <h2 class="section-title">📊 概览仪表板</h2>
                    <p class="section-subtitle">系统整体运行状况和关键指标</p>
                </div>

                <!-- Quick Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">👥</div>
                        <div class="stat-content">
                            <h3 class="stat-number" id="totalUsers">-</h3>
                            <p class="stat-label">总用户数</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">✅</div>
                        <div class="stat-content">
                            <h3 class="stat-number" id="completedTasks">-</h3>
                            <p class="stat-label">已完成任务</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🏆</div>
                        <div class="stat-content">
                            <h3 class="stat-number" id="totalAchievements">-</h3>
                            <p class="stat-label">成就总数</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⭐</div>
                        <div class="stat-content">
                            <h3 class="stat-number" id="totalPoints">-</h3>
                            <p class="stat-label">总积分</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="glass-container" style="margin-top: 2rem;">
                    <h3 class="container-title">📋 最近活动</h3>
                    <div id="recentActivity" class="activity-list">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="glass-container" style="margin-top: 2rem;">
                    <h3 class="container-title">⚡ 快速操作</h3>
                    <div class="quick-actions">
                        <button class="btn-primary btn-modern" onclick="showSection('users')">管理用户</button>
                        <button class="btn-secondary btn-modern" onclick="showSection('content')">管理内容</button>
                        <button class="btn-outline btn-modern" onclick="exportData()">导出数据</button>
                        <button class="btn-warning btn-modern" onclick="showSystemSettings()">系统设置</button>
                    </div>
                </div>
            </section>

            <!-- User Management Section -->
            <section id="users" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">👥 用户管理</h2>
                    <p class="section-subtitle">管理所有用户账户、角色和权限</p>
                </div>

                <!-- User Management Controls -->
                <div class="glass-container" style="margin-bottom: 2rem;">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex gap-3">
                            <button class="btn-primary btn-modern" id="createUserBtn">➕ 创建用户</button>
                            <button class="btn-secondary btn-modern" id="bulkActionsBtn">批量操作</button>
                        </div>
                        <div class="flex gap-3">
                            <select id="roleFilter" class="form-input-modern" style="max-width: 150px;">
                                <option value="">所有角色</option>
                                <option value="advisor">顾问</option>
                                <option value="parent">家长</option>
                                <option value="member">成员</option>
                            </select>
                            <input type="text" id="userSearch" class="form-input-modern" placeholder="搜索用户..." style="max-width: 200px;">
                        </div>
                    </div>
                </div>

                <!-- Users Table -->
                <div class="glass-container">
                    <div id="usersTable" class="users-table-container">
                        <!-- Users table will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Content Management Section -->
            <section id="content" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">📝 内容管理</h2>
                    <p class="section-subtitle">管理任务类型、成就类别和系统内容</p>
                </div>

                <!-- Content Management Tabs -->
                <div class="glass-container" style="margin-bottom: 2rem;">
                    <div class="tab-navigation">
                        <button class="tab-btn active" data-tab="task-types">任务类型</button>
                        <button class="tab-btn" data-tab="achievements">成就类别</button>
                        <button class="tab-btn" data-tab="groups">家庭组</button>
                        <button class="tab-btn" data-tab="announcements">系统公告</button>
                    </div>
                </div>

                <!-- Tab Content -->
                <div id="contentTabContent" class="glass-container">
                    <!-- Content will be loaded based on selected tab -->
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">📈 数据分析</h2>
                    <p class="section-subtitle">深入了解系统使用情况和用户行为</p>
                </div>

                <!-- Analytics content will be loaded here -->
                <div id="analyticsContent">
                    <!-- Charts and analytics will be rendered here -->
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">⚙️ 系统配置</h2>
                    <p class="section-subtitle">配置应用程序设置和系统参数</p>
                </div>

                <!-- Settings content will be loaded here -->
                <div id="settingsContent">
                    <!-- Settings forms will be rendered here -->
                </div>
            </section>

            <!-- Logs Section -->
            <section id="logs" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">📋 活动日志</h2>
                    <p class="section-subtitle">查看系统活动和用户操作记录</p>
                </div>

                <!-- Logs content will be loaded here -->
                <div id="logsContent">
                    <!-- Activity logs will be rendered here -->
                </div>
            </section>
        </main>
    </div>

    <!-- Modals will be inserted here dynamically -->
    <div id="modalContainer"></div>

    <!-- Scripts -->
    <script src="admin-dashboard.js"></script>
</body>
</html>
